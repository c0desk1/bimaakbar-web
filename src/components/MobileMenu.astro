---
import { SITE, LINKS } from "../consts"
import { con } from "../lib/utils"

const { pathname } = Astro.url
const subpath = pathname.match(/[^/]+/g)
---

<div id="drawer" class="fixed inset-0 h-0 z-40 overflow-hidden flex flex-col items-center justify-center md:hidden bg-[var(--color-bg)] backdrop-blur-xl transition-[height] duration-500 ease-in-out">
  <nav class="flex flex-col items-center space-y-2">
    {LINKS.map((LINK) => (
      <a href={LINK.href} class={con("flex items-center justify-center px-3 py-1 gap-4 rounded-full", "text-[var(--color-muted)] hover:text-[var(--color-fg)]", "hover:bg-[var(--color-hover)]", "transition-colors duration-300 ease-in-out", pathname === LINK.href || "/" + subpath?.[0] === LINK.href ? "pointer-events-none bg-[var(--color-bg-secondary)] text-[var(--color-fg)]" : "")}>
        {LINK.text}
      </a>
    ))}
  </nav>

  <div class="flex flex-row gap-4 mt-5 items-center">
    <a href="/rss.xml" target="_blank" aria-label={`Rss feed for ${SITE.title}`} class="size-9 rounded-xl p-2 items-center justify-center bg-transparent hover:bg-[var(--color-hover)] stroke-[var(--color-muted)] hover:stroke-[var(--color-fg)] border border-[var(--color-border)] transition-colors duration-500 ease-in-out">
      <svg class="size-full">
        <use href="/ui.svg#search"></use>
      </svg>
    </a>
    <a href="/rss.xml" target="_blank" aria-label={`Rss feed for ${SITE.title}`} class="size-9 rounded-xl p-2 items-center justify-center bg-transparent hover:bg-[var(--color-hover)] stroke-[var(--color-muted)] hover:stroke-[var(--color-fg)] border border-[var(--color-border)] transition-colors duration-500 ease-in-out">
      <svg class="size-full">
        <use href="/ui.svg#rss"></use>
      </svg>
    </a>
  </div>
</div>

<style>
  #drawer.open {
   height: 100vh;
  }
</style>
