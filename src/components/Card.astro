---
// src/components/Card.astro
import { Image } from 'astro:assets';

// 1. Definisikan 'Props' yang bisa diterima oleh komponen ini
interface Props {
  href: string;
  title: string;
  description?: string;
  image?: string;
  date?: Date;
  category?: string;
  tags?: string[];
  eager?: boolean;
}

const { href, title, description, image, date, category, tags } = Astro.props;
---

<div class="flex flex-row md:flex-col border border-[var(--color-border)] rounded-lg overflow-hidden bg-[var(--color-bg)] group transition-all hover:border-[var(--color-hover)]-400/50">

  {image && (
    <a {href} class="block w-1/3 md:w-full flex-shrink-0">
      <Image 
        src={image} 
        alt={`Gambar untuk ${title}`} 
        width={400} 
        height={225}
        format="webp"
        class="w-full h-full md:h-48 object-cover transition-transform duration-300 group-hover:scale-105"
        loading={Astro.props.eager ? 'eager' : 'lazy'}
        fetchpriority={Astro.props.eager ? 'high' : 'auto'}
      />
    </a>
  )}

  <div class="p-4 md:p-6 flex flex-col flex-grow">
    {date && (
      <p class="text-gray-400 text-xs md:text-sm mb-2">
        {new Date(date).toLocaleDateString('id-ID', {
          year: 'numeric', month: 'long', day: 'numeric'
        })}
      </p>
    )}

    <h3 class="text-lg md:text-xl font-bold mb-2">
      <a {href} class="hover:text-cyan-400 transition-colors">{title}</a>
    </h3>

    {description && (
      <p class="text-gray-300 mb-4 flex-grow text-sm">{description}</p>
    )}

    {(category || tags) && (
      <div class="flex flex-wrap items-center gap-2 mt-auto pt-4 border-t border-gray-800">
        {category && (
          <span class="bg-cyan-400/10 text-cyan-400 text-xs font-bold px-2 py-1 rounded-full">
            {category}
          </span>
        )}
        {tags?.map((tag: string) => (
          <span class="bg-gray-700/50 text-gray-300 text-xs font-semibold px-2 py-1 rounded-full hidden sm:inline-block">
            #{tag}
          </span>
        ))}
      </div>
    )}
  </div>

</div>